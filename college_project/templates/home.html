{% extends 'layout.html' %}
{% load static %}

{% block title %}Home{% endblock %}

{% block content %}

<!-- HERO SECTION -->
<section class="hero-slider">

    <div class="slide active">
        <img src="{% static 'images/slide1.png' %}" alt="">
    </div>

    <div class="slide">
        <img src="{% static 'images/slide2.png' %}" alt="">
    </div>
    <div class="slide">
        <img src="{% static 'images/slide3.png' %}" alt="">
    </div>

    <!-- Arrows -->
    <div class="arrow left">&#10094;</div>
    <div class="arrow right">&#10095;</div>

    <!-- Dots -->
    <div class="dots"></div>

</section>


<!-- CARS SECTION -->
<section class="car-slider-section">

    <h2>Avtomobillar</h2>

    <div class="car-slider-wrapper">
        <div class="car-slider">

            <div class="car-card">
                <img src="{% static 'images/car1.png' %}" alt="">
                <h3>Chevrolet Captiva</h3>
                <p class="price">15 000 000 SO'M</p>
                <button>Batafsil</button>
            </div>

            <div class="car-card">
                <img src="{% static 'images/car2.png' %}" alt="">
                <h3>Chevrolet Traverse</h3>
                <p class="price">80 000 000 SO'M</p>
                <button>Batafsil</button>
            </div>

            <div class="car-card">
                <img src="{% static 'images/car3.webp' %}" alt="">
                <h3>Chevrolet Onix</h3>
                <p class="price">15 000 000 SO'M</p>
                <button>Batafsil</button>
            </div>

            <div class="car-card">
                <img src="{% static 'images/car3.webp' %}" alt="">
                <h3>Chevrolet Onix</h3>
                <p class="price">15 000 000 SO'M</p>
                <button>Batafsil</button>
            </div>


            <div class="car-card">
                <img src="{% static 'images/car3.webp' %}" alt="">
                <h3>Chevrolet Onix</h3>
                <p class="price">15 000 000 SO'M</p>
                <button>Batafsil</button>
            </div>

            <!-- add more cards here -->

        </div>

        <div class="car-arrow left">&#10094;</div>
        <div class="car-arrow right">&#10095;</div>

    </div>

</section>

{% endblock %}

{% block scripts %}
<script>
document.addEventListener("DOMContentLoaded", function() {

    /* ================= HERO SLIDER ================= */

    const heroSlides = document.querySelectorAll(".hero-slider .slide");
    const heroLeft = document.querySelector(".hero-slider .arrow.left");
    const heroRight = document.querySelector(".hero-slider .arrow.right");
    const dotsContainer = document.querySelector(".hero-slider .dots");

    if (heroSlides.length > 0) {

        let heroIndex = 0;
        let heroInterval;

        heroSlides.forEach((_, i) => {
            const dot = document.createElement("span");
            if (i === 0) dot.classList.add("active");
            dot.addEventListener("click", () => {
                heroIndex = i;
                showHero(heroIndex);
                resetHeroAuto();
            });
            dotsContainer.appendChild(dot);
        });

        const heroDots = document.querySelectorAll(".hero-slider .dots span");

        function showHero(i) {
            heroSlides.forEach(s => s.classList.remove("active"));
            heroDots.forEach(d => d.classList.remove("active"));
            heroSlides[i].classList.add("active");
            heroDots[i].classList.add("active");
        }

        function nextHero() {
            heroIndex = (heroIndex + 1) % heroSlides.length;
            showHero(heroIndex);
        }

        function prevHero() {
            heroIndex = (heroIndex - 1 + heroSlides.length) % heroSlides.length;
            showHero(heroIndex);
        }

        function startHeroAuto() {
            heroInterval = setInterval(nextHero, 4000);
        }

        function resetHeroAuto() {
            clearInterval(heroInterval);
            startHeroAuto();
        }

        heroRight?.addEventListener("click", () => {
            nextHero();
            resetHeroAuto();
        });

        heroLeft?.addEventListener("click", () => {
            prevHero();
            resetHeroAuto();
        });

        startHeroAuto();
    }


    /* ================= CAR SLIDER ================= */

    const carSlider = document.querySelector(".car-slider");
    const carLeft = document.querySelector(".car-arrow.left");
    const carRight = document.querySelector(".car-arrow.right");

    if (carSlider) {

        const carCards = document.querySelectorAll(".car-card");
        const gap = 30;
        const cardWidth = carCards[0].offsetWidth + gap;

        let carIndex = 0;

        function updateCarSlider() {
            carSlider.style.transform = `translateX(-${carIndex * cardWidth}px)`;
        }

        carRight?.addEventListener("click", () => {
            if (carIndex < carCards.length - 3) {
                carIndex++;
            } else {
                carIndex = 0;
            }
            updateCarSlider();
        });

        carLeft?.addEventListener("click", () => {
            if (carIndex > 0) {
                carIndex--;
            } else {
                carIndex = carCards.length - 3;
            }
            updateCarSlider();
        });
    }

});
</script>
{% endblock %}


