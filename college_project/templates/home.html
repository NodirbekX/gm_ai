{% extends 'layout.html' %}
{% load static %}

{% block title %}Home{% endblock %}

{% block content %}

<!-- HERO SECTION -->
<section class="hero-slider">

    <div class="slide active">
        <img src="{% static 'images/slide1.png' %}" alt="">
    </div>

    <div class="slide">
        <img src="{% static 'images/slide2.png' %}" alt="">
    </div>
    <div class="slide">
        <img src="{% static 'images/slide3.png' %}" alt="">
    </div>

    <!-- Arrows -->
    <div class="arrow left">&#10094;</div>
    <div class="arrow right">&#10095;</div>

    <!-- Dots -->
    <div class="dots"></div>

</section>


<!-- CARS SECTION -->
<section class="car-slider-section">

    <h2>Avtomobillar</h2>

    <div class="car-slider-wrapper">
        <div class="car-slider">

            <div class="car-card">
                <img src="{% static 'images/car1.png' %}" alt="">
                <h3>Chevrolet Captiva</h3>
                <p class="price">15 000 000 SO'M</p>
                <button>Batafsil</button>
            </div>

            <div class="car-card">
                <img src="{% static 'images/car2.png' %}" alt="">
                <h3>Chevrolet Traverse</h3>
                <p class="price">80 000 000 SO'M</p>
                <button>Batafsil</button>
            </div>

            <div class="car-card">
                <img src="{% static 'images/car3.webp' %}" alt="">
                <h3>Chevrolet Onix</h3>
                <p class="price">15 000 000 SO'M</p>
                <button>Batafsil</button>
            </div>

            <!-- add more cards here -->

        </div>

        <div class="car-arrow left">&#10094;</div>
        <div class="car-arrow right">&#10095;</div>

    </div>

</section>

{% endblock %}

{% block scripts %}
<script>
document.addEventListener("DOMContentLoaded", function() {

    const slides = document.querySelectorAll(".slide");
    const left = document.querySelector(".arrow.left");
    const right = document.querySelector(".arrow.right");
    const dotsContainer = document.querySelector(".dots");

    if (slides.length === 0) return;

    let index = 0;
    let interval;

    // Create dots dynamically
    slides.forEach((_, i) => {
        const dot = document.createElement("span");
        if (i === 0) dot.classList.add("active");
        dot.addEventListener("click", () => {
            index = i;
            showSlide(index);
            resetAuto();
        });
        dotsContainer.appendChild(dot);
    });

    const dots = document.querySelectorAll(".dots span");

    function showSlide(i) {
        slides.forEach(s => s.classList.remove("active"));
        dots.forEach(d => d.classList.remove("active"));

        slides[i].classList.add("active");
        dots[i].classList.add("active");
    }

    function nextSlide() {
        index = (index + 1) % slides.length;
        showSlide(index);
    }

    function prevSlide() {
        index = (index - 1 + slides.length) % slides.length;
        showSlide(index);
    }

    function startAuto() {
        interval = setInterval(nextSlide, 4000);
    }

    function resetAuto() {
        clearInterval(interval);
        startAuto();
    }

    right?.addEventListener("click", () => {
        nextSlide();
        resetAuto();
    });

    left?.addEventListener("click", () => {
        prevSlide();
        resetAuto();
    });

    startAuto();

});
</script>
{% endblock %}


